# notification-container

Сервис для поллинга сообщений из мессенджеров (TamTam, Telegram, и т.д.) с последующей отправкой в очередь RabbitMQ для дальнейшей обработки.

## Архитектура

Origin (Telegram, TamTam, WhatsAPP) -> PollingService -> Redis (Лимитер запросов) -> RabbitMQ

## Возможности

- **Поддержка нескольких Origin клиентов**: TamTam, Telegram (расширяемо)
- **Rate limiting**: Ограничение запросов к API мессенджеров
- **Асинхронная обработка**: Все операции выполняются асинхронно
- **Отказоустойчивость**: Автоматические повторные попытки при ошибках
- **Мониторинг**: Полная метрика через Prometheus и дашборды Grafana
- **Масштабируемость**: Каждый токен бота работает в отдельном воркере

## Технологии

- **Python 3.9+** с asyncio
- **FastStream** для работы с RabbitMQ
- **Redis** для rate limiting
- **Prometheus** для сбора метрик
- **Grafana** для визуализации
- **Docker** для контейнеризации
- **Poetry** для управления зависимостями

### Требования

- Docker и Docker Compose
- Python 3.9+ (для локальной разработки)
- Poetry (для управления зависимостями)

### Быстрый запуск

1. Клонируйте репозиторий
2. Создайте файл ```.env``` на основе ```.env.example```
3. Настройте переменные окружения в ```.env```
4. Запустите все сервисы ```docker-compose up --build```
5. Перейдите на порт Grafana (3000) и создайте дашборд из шаблона в ```grafana_dashboard_template.json```